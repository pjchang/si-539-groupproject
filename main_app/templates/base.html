{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>
			{{title}}
		</title>
		<!-- AngularJS CSS -->
		<link rel="stylesheet" href="https://gitcdn.link/repo/angular/bower-material/master/angular-material.css">
	</head>
	<body data-ng-app="starterApp">
		<!-- AngularJS Javascript -->
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-animate.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-aria.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angular-ui-router/1.0.0-rc.1/angular-ui-router.min.js"></script>

		<header>
			<h1>Backend Demo</h1>
		</header>
		<section data-ng-controller="baseController">
			{% verbatim %}
			<style>
				table, th, tr {
					border: 1px solid black;
				}
			</style>
			<table >
				<tr>
					<th>

					</th>
					<th>
						Time (month-19XX)
					</th>
					<th>
						Location (latitude, longitude)
					</th>
					<th>
						Size (in acres)
					</th>
				</tr>
				<tr data-ng-repeat="fire in fire_events" >
					<th >
						A Fire Event
					</th>
					<th>
						{{fire.time}}
					</th>
					<th>
						{{fire.lat}}, {{fire.long}}
					</th>
					<th>
						{{fire.area}}
					</th>
				</tr>
			</table>
			{% endverbatim %}
		</section>
		<footer>
			<hr>
			<p>Wolverine Initiative. All Right Reserved 2017.</p>
		</footer>

		

		<script type="text/javascript">
			var app = angular.module('starterApp', []);
			// Django CSRF Protection
			app.config(function ($httpProvider) {
				$httpProvider.defaults.xsrfCookieName = 'csrftoken';
				$httpProvider.defaults.xsrfHeaderName = 'X-CSRFToken';
			});
		</script>

		<script type="text/javascript" >
			app.controller("baseController", function($scope, $http){
				// send a ajax request!
				target_url = "/";
				$http.post(target_url, {"request_msg": "haha"})
				.then(function (response) {
					$scope.fire_events = response.data["data"];
					console.log($scope.fire_events);
				}, function (xhr, status, err) {
					console.error(target_url, status, err.toString(), xhr.responseText);
				});
			});
		</script>
	</body>
</html>